<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>View Homework</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../../jquery-easyui-1.10.19/themes/default/easyui.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="../../jquery-easyui-1.10.19/themes/icon.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="../../jquery-easyui-1.10.19/demo/demo.css"
    />
    <script
      type="text/javascript"
      src="../../jquery-easyui-1.10.19/jquery.min.js"
    ></script>
    <script
      type="text/javascript"
      src="../../jquery-easyui-1.10.19/jquery.easyui.min.js"
    ></script>
    <script defer>
      $(document).ready(function () {
        let existingHomeworkData
        let data = {
          works: [
            {
              workname: "JavaEE作业1",
              startdate: "2024-05-16",
              enddate: "2024-05-18",
              workdesc: "熟悉编译环境界面",
              courseid: "JavaEE",
            },
            {
              workname: "Python作业1",
              startdate: "2024-05-14",
              enddate: "2024-05-15",
              workdesc: "编写Python脚本",
              courseid: "Python",
            },
            {
              workname: "Java作业1",
              startdate: "2024-05-17",
              enddate: "2024-05-18",
              workdesc: "安装编译软件",
              courseid: "Java",
            },
          ],
        };
        existingHomeworkData = localStorage.getItem("homeworkData");
        if (existingHomeworkData) {
          // 如果已存在，将其解析为对象
          existingHomeworkData = JSON.parse(existingHomeworkData);
        } else {
          // 如果不存在，创建一个默认用户
          localStorage.setItem("homeworkData", JSON.stringify(data));
          existingHomeworkData = data;
        }
        
        function addlocalStorage() {
          existingHomeworkData = localStorage.getItem("homeworkData");
          if (existingHomeworkData) {
            // 如果已存在，将其解析为对象
            existingHomeworkData = JSON.parse(existingHomeworkData);
          } else {
            // 如果不存在，创建一个空对象
            existingHomeworkData = {};
            localStorage.setItem("homeworkData", JSON.stringify(data));
          }
          data=existingHomeworkData
          console.log(data);
          $("#dg").datagrid('loadData',data.works);
        }
        addlocalStorage();
      });
    </script>
  </head>
  <body>
    <table
      class="easyui-datagrid"
      title="全部作业"
      id="dg"
      style="width: 100%; height: 580px"
      data-options="singleSelect:true,collapsible:true,method:'get'"
    >
      <thead>
        <tr>
          <th
            data-options="field: 'workname', title: '作业名称', width: 100"
          ></th>
          <th
            data-options="field: 'startdate', title: '发布日期', width: 100"
          ></th>
          <th
            data-options="field: 'enddate', title: '截止日期', width: 100"
          ></th>
          <th
            data-options="field: 'workdesc', title: '作业描述', width: 200"
          ></th>
          <th data-options="field: 'courseid', title: '课程', width: 100"></th>
        </tr>
      </thead>
    </table>
  </body>
</html>
