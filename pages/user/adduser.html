<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="../../jquery-easyui-1.10.19/themes/default/easyui.css" />
    <link rel="stylesheet" type="text/css" href="../../jquery-easyui-1.10.19/themes/icon.css" />
    <link rel="stylesheet" type="text/css" href="../../jquery-easyui-1.10.19/demo/demo.css" />
    <script type="text/javascript" src="../../jquery-easyui-1.10.19/jquery.min.js"></script>
    <script type="text/javascript" src="../../jquery-easyui-1.10.19/jquery.easyui.min.js"></script>
    <script>
      $(document).ready(function () {
        const sub = document.getElementById("sub");

        sub.addEventListener("click", function (e) {
          e.preventDefault();

          const uname = document.getElementById("uname").value;
          const uemail = document.getElementById("uemail").value;
          const ubirth = document.getElementById("ubirth").value;
          const uphone = document.getElementById("uphone").value;
          const sex = $("select[name='sex']").val();
          const department = $("select[name='department']").val();

          let existingUserData = localStorage.getItem("UserData");

          if (existingUserData) {
            existingUserData = JSON.parse(existingUserData);
          } else {
            existingUserData = { users: [] };
          }

          const newUser = {
            name: uname,
            email: uemail,
            birth: ubirth,
            phone: uphone,
            sex: sex,
            department: department
          };

          existingUserData.users.push(newUser);

          localStorage.setItem("UserData", JSON.stringify(existingUserData));

          console.log("Data saved:", existingUserData);
          window.location.href = "alluser.html";
        });
      });
    </script>
  </head>
  <body>
    <div class="easyui-panel" title="添加个人信息" style="width: 600px">
      <div style="padding: 10px 60px 20px 60px">
        <form action="" method="post" id="ff" name="ff">
          <table cellpadding="5">
            <tr>
              <td>姓名：</td>
              <td><input class="easyui-textbox" type="text" name="name" id="uname" /></td>
            </tr>
            <tr>
              <td>邮箱：</td>
              <td><input class="easyui-textbox" type="text" name="email" id="uemail" /></td>
            </tr>
            <tr>
              <td>性别：</td>
              <td>
                <select name="sex">
                  <option value="男">男</option>
                  <option value="女">女</option>
                </select>
              </td>
            </tr>
            <tr>
              <td>生日：</td>
              <td><input class="easyui-datebox" name="birthday" id="ubirth" /></td>
            </tr>
            <tr>
              <td>联系电话:</td>
              <td><input class="easyui-textbox" type="text" name="phone" id="uphone" /></td>
            </tr>
            <tr>
              <td>所属院系:</td>
              <td>
                <select name="department" id="" style="width: 140px">
                  <option value="计算机学院">计算机学院</option>
                  <option value="通信工程学院">通信工程学院</option>
                  <option value="信息工程学院">信息工程学院</option>
                  <option value="外国语学院">外国语学院</option>
                  <option value="机械工程学院">机械工程学院</option>
                  <option value="电子信息学院">电子信息学院</option>
                  <option value="经济管理学院">经济管理学院</option>
                  <option value="电气工程学院">电气工程学院</option>
                  <option value="航空工程学院">航空工程学院</option>
                  <option value="材料科学与工程学院">材料科学与工程学院</option>
                  <option value="生命科学与技术学院">生命科学与技术学院</option>
                </select>
              </td>
            </tr>
          </table>
          <div style="text-align: center; padding: 15px">
            <input type="submit" name="" id="sub" value="添加" />
          </div>
        </form>
      </div>
    </div>
  </body>
</html>
